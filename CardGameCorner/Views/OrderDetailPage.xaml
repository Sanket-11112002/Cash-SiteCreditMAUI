<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CardGameCorner.Views.OrderDetailPage"
             BackgroundColor="#1B3B48"
             Title="Order Details">

    <ScrollView>
        <VerticalStackLayout Spacing="16" Padding="16">
            <!-- Order Information -->
            <Frame BackgroundColor="#2C5A70"
                   BorderColor="Transparent"
                   Padding="16"
                   CornerRadius="8"
                   HasShadow="False">
                <VerticalStackLayout Spacing="8">
                    <Label Text="Order Information"
                           TextColor="White"
                           FontSize="18"
                           FontAttributes="Bold"/>

                    <VerticalStackLayout Spacing="4">
                        <Label Text="{Binding OrderDetail.OrderId, StringFormat='Order ID: {0}'}"
                               TextColor="White"
                               FontSize="14"/>
                        <Label Text="{Binding OrderDetail.OrderDate, StringFormat='Order Date: {0:d}'}"
                               TextColor="White"
                               FontSize="14"/>
                        <Label Text="{Binding OrderDetail.Status, StringFormat='Status: {0}'}"
                               TextColor="White"
                               FontSize="14"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Shipping Details -->
            <Frame BackgroundColor="#2C5A70"
                   BorderColor="Transparent"
                   Padding="16"
                   CornerRadius="8"
                   HasShadow="False">
                <VerticalStackLayout Spacing="8">
                    <Label Text="Shipping Details"
                           TextColor="White"
                           FontSize="18"
                           FontAttributes="Bold"/>

                    <Grid ColumnDefinitions="Auto,Auto" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto" RowSpacing="8">
                        <Label Grid.Row="0" Grid.Column="0" Text="First Name:" TextColor="White" FontSize="12"/>
                        <Label Grid.Row="0" Grid.Column="1" Text="{Binding OrderDetail.Name}" TextColor="White" FontSize="14" Margin="10,0,0,0"/>

                        <Label Grid.Row="1" Grid.Column="0" Text="Last Name:" TextColor="White" FontSize="12"/>
                        <Label Grid.Row="1" Grid.Column="1" Text="{Binding OrderDetail.LastName}" TextColor="White" FontSize="14" Margin="10,0,0,0"/>

                        <Label Grid.Row="2" Grid.Column="0" Text="Email:" TextColor="White" FontSize="12"/>
                        <Label Grid.Row="2" Grid.Column="1" Text="{Binding OrderDetail.Email}" TextColor="White" FontSize="14" Margin="10,0,0,0"/>

                        <Label Grid.Row="3" Grid.Column="0" Text="Address:" TextColor="White" FontSize="12"/>
                        <Label Grid.Row="3" Grid.Column="1" Text="{Binding OrderDetail.Address}" TextColor="White" FontSize="14" Margin="10,0,0,0"/>

                        <Label Grid.Row="4" Grid.Column="0" Text="City:" TextColor="White" FontSize="12"/>
                        <Label Grid.Row="4" Grid.Column="1" Text="{Binding OrderDetail.City}" TextColor="White" FontSize="14" Margin="10,0,0,0"/>

                        <Label Grid.Row="5" Grid.Column="0" Text="Province:" TextColor="White" FontSize="12"/>
                        <Label Grid.Row="5" Grid.Column="1" Text="{Binding OrderDetail.Province}" TextColor="White" FontSize="14" Margin="10,0,0,0"/>

                        <Label Grid.Row="6" Grid.Column="0" Text="Fiscal Code:" TextColor="White" FontSize="12"/>
                        <Label Grid.Row="6" Grid.Column="1" Text="{Binding OrderDetail.FiscalCode}" TextColor="White" FontSize="14" Margin="10,0,0,0"/>

                        <Label Grid.Row="7" Grid.Column="0" Text="Zip:" TextColor="White" FontSize="12"/>
                        <Label Grid.Row="7" Grid.Column="1" Text="{Binding OrderDetail.Zip}" TextColor="White" FontSize="14" Margin="10,0,0,0"/>

                        <Label Grid.Row="8" Grid.Column="0" Text="Country:" TextColor="White" FontSize="12"/>
                        <Label Grid.Row="8" Grid.Column="1" Text="{Binding OrderDetail.Country}" TextColor="White" FontSize="14" Margin="10,0,0,0"/>

                        <Label Grid.Row="9" Grid.Column="0" Text="Phone:" TextColor="White" FontSize="12"/>
                        <Label Grid.Row="9" Grid.Column="1" Text="{Binding OrderDetail.Phone}" TextColor="White" FontSize="14" Margin="10,0,0,0"/>
                    </Grid>


                </VerticalStackLayout>
            </Frame>

            <!-- Cards Collection -->
            <VerticalStackLayout BindableLayout.ItemsSource="{Binding OrderDetail.Cards}" Spacing="10">
                <BindableLayout.ItemTemplate>
                    <DataTemplate>
                        <Grid Padding="16" ColumnDefinitions="*, *, *, *, *"
                              RowDefinitions="Auto, Auto" 
                              BackgroundColor="#22313F"
                              ColumnSpacing="10">
                            <!-- Column 0: Card Image -->
                            <Image Source="{Binding Image}"
                                   HeightRequest="100" 
                                   WidthRequest="70"  
                                   Aspect="AspectFit" 
                                   Grid.Column="0" 
                                   Grid.RowSpan="2" />

                            <!-- Column 1: Model and Condition -->
                            <StackLayout Grid.Column="1" Orientation="Vertical" Spacing="5" HeightRequest="100">
                                <Label Text="{Binding Model}" 
                                       FontSize="12" 
                                       FontAttributes="Bold" 
                                       TextColor="White"
                                       MaxLines="2"
                                       LineBreakMode="TailTruncation" />
                                <Label Text="Evaluated:" 
                                       FontSize="12" 
                                       TextColor="White" 
                                       FontAttributes="Bold" 
                                       HorizontalTextAlignment="Center" 
                                       MaxLines="1"
                                       LineBreakMode="TailTruncation" />
                                <Label Text="{Binding Evaluated}" 
                                         FontSize="12" 
                                         TextColor="White"
                                       HorizontalTextAlignment="Center" />
                            </StackLayout>
                            
                            <!-- Column 2: Language, Condition, Edition, and Rarity -->
                            <StackLayout Grid.Column="2" HeightRequest="100" Orientation="Vertical" HorizontalOptions="Center" Spacing="5" Grid.RowSpan="2">
                                <!-- Language and Condition -->
                                <StackLayout Orientation="Horizontal" HorizontalOptions="Center">
                                    <Image HeightRequest="20" 
                                           WidthRequest="40"
                                           Margin="3,0,0,0" 
                                           Source="{Binding LanguageFlag}" />

                                    <Frame BackgroundColor="LightGreen"
                                           Padding="0"
                                           CornerRadius="3"
                                           HasShadow="False">
                                        <Label Text="{Binding Condition}" 
                                               TextColor="White" 
                                               FontSize="10" 
                                               HeightRequest="10" 
                                               WidthRequest="30"
                                               HorizontalTextAlignment="Center" />
                                    </Frame>
                                </StackLayout>

                                <!-- Edition and Rarity -->
                                <StackLayout Orientation="Vertical" Spacing="7" HorizontalOptions="Center" Margin="0,5,0,0">
                                    <Label Text="First Edition:" 
                                             FontSize="12" 
                                             TextColor="White" 
                                             FontAttributes="Bold" 
                                             HorizontalTextAlignment="Center" />
                                    <Label Text="{Binding FirstEdition}" 
                                           FontSize="14" 
                                           TextColor="White" 
                                           HorizontalTextAlignment="Center" />
                                </StackLayout>
                            </StackLayout>
                            
                            <!-- Column 3: Price -->
                            <StackLayout Grid.Column="3" Orientation="Vertical" Spacing="6" HeightRequest="100" HorizontalOptions="Center" Margin="14,0,0,0">
                                <Label Text="Price" 
                                        FontSize="12" 
                                        TextColor="LightGreen" 
                                        FontAttributes="Bold" 
                                        HorizontalTextAlignment="Center" />
                                <Label Text="{Binding ConfirmedPrice, StringFormat='€{0:F2}'}" 
                                        FontSize="14" 
                                        TextColor="White" 
                                        HorizontalTextAlignment="Center" />
                                <Label Text="AlteredByStaff:" 
                                         FontSize="12" 
                                         TextColor="White" 
                                         FontAttributes="Bold" 
                                         HorizontalTextAlignment="Center" />
                                <Label Text="{Binding AlteredByStaff}" 
                                       FontSize="12" 
                                       TextColor="White" 
                                       HorizontalTextAlignment="Center" />
                            </StackLayout>
                           
                            <!-- Column 2: Quantity -->
                            <StackLayout Grid.Column="4" Orientation="Vertical" Spacing="5" HeightRequest="100" HorizontalOptions="End">
                                <Label Text="Quantity" 
                                       FontSize="12" 
                                       TextColor="LightGreen" 
                                       FontAttributes="Bold" 
                                       HorizontalTextAlignment="Center" />
                                <Label Text="{Binding Qty}" 
                                       FontSize="14" 
                                       TextColor="White" 
                                       HorizontalTextAlignment="Center" />
                                <Label Text="Confirmed:" 
                                       FontSize="11" 
                                       TextColor="White" 
                                       FontAttributes="Bold" 
                                       HorizontalTextAlignment="Center" 
                                       MaxLines="2"
LineBreakMode="TailTruncation" />
                                <Label Text="{Binding ConfirmedQty}" 
                                       FontSize="14" 
                                       TextColor="White" 
                                       HorizontalTextAlignment="Center" />
                            </StackLayout>

                        </Grid>
                    </DataTemplate>
                </BindableLayout.ItemTemplate>
            </VerticalStackLayout>


        </VerticalStackLayout>
    </ScrollView>
</ContentPage>